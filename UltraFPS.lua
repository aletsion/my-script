-- FPS BOOST 2025 + MENU CHÍNH KÉO ĐƯỢC HOÀN HẢO + FPS COUNTER RIÊNG KÉO ĐƯỢC + FIX CoreGui NIL
local UserInputService = game:GetService("UserInputService")
local Lighting         = game:GetService("Lighting")
local StarterGui       = game:GetService("StarterGui")
local TweenService     = game:GetService("TweenService")
local RunService       = game:GetService("RunService")
local Terrain          = workspace.Terrain

-- FIX CoreGui NIL (HOẠT ĐỘNG TRÊN SOLARA, WAVE, VÀ MỌI EXECUTOR MỚI)
local CoreGui
if gethui then
    CoreGui = gethui()
elseif syn and syn.request then
    CoreGui = game:GetService("CoreGui")
else
    CoreGui = game:GetService("Players").LocalPlayer:WaitForChild("PlayerGui")
end

local BoostEnabled = false
local CurrentFPS   = 60
local RealFPS      = 0

-- Đo FPS thực tế
local lastTime = tick()
local frames = 0
RunService.Heartbeat:Connect(function()
    frames += 1
    if tick() - lastTime >= 1 then
        RealFPS = frames
        frames = 0
        lastTime = tick()
    end
end)

local function forceUncap()
    if setfpscap then pcall(setfpscap, math.huge) end
end

local function applyBoost(fps)
    CurrentFPS = fps or CurrentFPS
    pcall(function()
        Lighting.Brightness = 2.5
        Lighting.GlobalShadows = false
        Lighting.FogEnd = 999999
        Terrain.WaterWaveSize = 0
        Terrain.WaterWaveSpeed = 0
        Terrain.WaterReflectance = 0
        Terrain.WaterTransparency = 0.8

        for _, v in workspace:GetDescendants() do
            if v:IsA("ParticleEmitter") or v:IsA("Trail") or v:IsA("Smoke") or v:IsA("Sparkles") then
                v.Enabled = false
            elseif v:IsA("Decal") or v:IsA("Texture") then
                if not v.Parent:FindFirstChild("Humanoid") then v.Transparency = 0.7 end
            elseif (v:IsA("BasePart") or v:IsA("MeshPart")) and not v.Parent:FindFirstChild("Humanoid") then
                v.Material = Enum.Material.SmoothPlastic
                v.CastShadow = false
            end
        end
        for _, v in Lighting:GetChildren() do if v:IsA("PostEffect") then v.Enabled = false end end
        settings().Rendering.QualityLevel = Enum.QualityLevel.Level01
        if setfpscap then pcall(setfpscap, CurrentFPS == 9999 and math.huge or CurrentFPS) end
        forceUncap()
    end)
    BoostEnabled = true
end

local function disableBoost()
    pcall(function()
        settings().Rendering.QualityLevel = Enum.QualityLevel.Automatic
        if setfpscap then pcall(setfpscap, 60) end
    end)
    BoostEnabled = false
end

-- FPS COUNTER RIÊNG (luôn hiện + kéo được)
local function createFPSCounter()
    local gui = Instance.new("ScreenGui", CoreGui)
    gui.ResetOnSpawn = false
    local frame = Instance.new("Frame", gui)
    frame.Size = UDim2.new(0,180,0,90)
    frame.Position = UDim2.new(0,20,0,20)
    frame.BackgroundColor3 = Color3.fromRGB(10,10,10)
    Instance.new("UICorner", frame).CornerRadius = UDim.new(0,12)
    Instance.new("UIStroke", frame).Color = Color3.fromRGB(255,120,0)

    local bar = Instance.new("Frame", frame)
    bar.Size = UDim2.new(1,0,0,25)
    bar.BackgroundColor3 = Color3.fromRGB(255,120,0)
    Instance.new("UICorner", bar).CornerRadius = UDim.new(0,12)
    local txt = Instance.new("TextLabel", bar)
    txt.Size = UDim2.new(1,0,1,0)
    txt.BackgroundTransparency = 1
    txt.Text = "FPS COUNTER"
    txt.TextColor3 = Color3.new(1,1,1)
    txt.Font = Enum.Font.GothamBold
    txt.TextSize = 18

    local target = Instance.new("TextLabel", frame)
    target.Position = UDim2.new(0,0,0,28)
    target.Size = UDim2.new(1,0,0,30)
    target.BackgroundTransparency = 1
    target.Text = "TARGET: 60"
    target.TextColor3 = Color3.fromRGB(255,180,0)
    target.Font = Enum.Font.GothamBold
    target.TextSize = 20

    local real = Instance.new("TextLabel", frame)
    real.Position = UDim2.new(0,0,0,58)
    real.Size = UDim2.new(1,0,0,30)
    real.BackgroundTransparency = 1
    real.Text = "REAL: 60"
    real.TextColor3 = Color3.fromRGB(0,255,0)
    real.Font = Enum.Font.GothamBold
    real.TextSize = 20

    spawn(function()
        while task.wait(0.1) do
            real.Text = "REAL: " .. RealFPS
            target.Text = "TARGET: " .. (CurrentFPS == 9999 and "UNCAPPED" or CurrentFPS)
        end
    end)

    -- Kéo FPS counter
    local dragging, dragInput, dragStart, startPos
    bar.InputBegan:Connect(function(i) if i.UserInputType == Enum.UserInputType.MouseButton1 then dragging = true dragStart = i.Position startPos = frame.Position end end)
    bar.InputChanged:Connect(function(i) if i.UserInputType == Enum.UserInputType.MouseMovement and dragging then dragInput = i end end)
    bar.InputEnded:Connect(function() dragging = false end)
    RunService.Heartbeat:Connect(function()
        if dragging and dragInput then
            local delta = dragInput.Position - dragStart
            frame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
        end
    end)
end

-- MENU CHÍNH (KÉO ĐƯỢC HOÀN HẢO + FIX CoreGui)
local function createMainMenu()
    local scr = Instance.new("ScreenGui", CoreGui)
    scr.ResetOnSpawn = false

    local openBtn = Instance.new("TextButton", scr)
    openBtn.Size = UDim2.new(0,220,0,55)
    openBtn.Position = UDim2.new(1,-240,1,-80)
    openBtn.BackgroundColor3 = Color3.fromRGB(15,15,15)
    openBtn.Text = "FPS CUSTOM Down Arrow"
    openBtn.TextColor3 = Color3.fromRGB(255,120,0)
    openBtn.Font = Enum.Font.GothamBlack
    openBtn.TextSize = 26
    Instance.new("UICorner", openBtn).CornerRadius = UDim.new(0,16)
    Instance.new("UIStroke", openBtn).Color = Color3.fromRGB(255,120,0)

    local menu = Instance.new("Frame", scr)
    menu.Size = UDim2.new(0,360,0,220)
    menu.BackgroundColor3 = Color3.fromRGB(12,12,12)
    menu.Visible = false
    menu.ClipsDescendants = true
    Instance.new("UICorner", menu).CornerRadius = UDim.new(0,20)
    Instance.new("UIStroke", menu).Color = Color3.fromRGB(255,120,0)

    local dragBar = Instance.new("Frame", menu)
    dragBar.Size = UDim2.new(1,0,0,35)
    dragBar.BackgroundColor3 = Color3.fromRGB(255,120,0)
    Instance.new("UICorner", dragBar).CornerRadius = UDim.new(0,20)
    local dragTitle = Instance.new("TextLabel", dragBar)
    dragTitle.Size = UDim2.new(1,0,1,0)
    dragTitle.BackgroundTransparency = 1
    dragTitle.Text = "FPS CUSTOM 2025"
    dragTitle.TextColor3 = Color3.new(1,1,1)
    dragTitle.Font = Enum.Font.GothamBlack
    dragTitle.TextSize = 28

    local toggle = Instance.new("TextButton", menu)
    toggle.Size = UDim2.new(0.9,0,0,60)
    toggle.Position = UDim2.new(0.05,0,0.2,0)
    toggle.BackgroundColor3 = Color3.fromRGB(40,40,40)
    toggle.Text = "  [ ]  BẬT FPS BOOST"
    toggle.TextColor3 = Color3.new(1,1,1)
    toggle.TextXAlignment = Enum.TextXAlignment.Left
    toggle.Font = Enum.Font.GothamBold
    toggle.TextSize = 24
    Instance.new("UICorner", toggle).CornerRadius = UDim.new(0,12)

    local sliderBack = Instance.new("Frame", menu)
    sliderBack.Size = UDim2.new(0.9,0,0,40)
    sliderBack.Position = UDim2.new(0.05,0,0.55,0)
    sliderBack.BackgroundColor3 = Color3.fromRGB(40,40,40)
    Instance.new("UICorner", sliderBack).CornerRadius = UDim.new(0,20)

    local sliderFill = Instance.new("Frame", sliderBack)
    sliderFill.Size = UDim2.new(0.5,0,1,0)
    sliderFill.BackgroundColor3 = Color3.fromRGB(255,120,0)
    Instance.new("UICorner", sliderFill).CornerRadius = UDim.new(0,20)

    local sliderKnob = Instance.new("TextButton", sliderBack)
    sliderKnob.Size = UDim2.new(0,40,0,40)
    sliderKnob.BackgroundColor3 = Color3.fromRGB(255,180,0)
    sliderKnob.Text = ""
    Instance.new("UICorner", sliderKnob).CornerRadius = UDim.new(0,20)

    local sliding = false
    sliderKnob.MouseButton1Down:Connect(function() sliding = true end)
    UserInputService.InputEnded:Connect(function(i) if i.UserInputType == Enum.UserInputType.MouseButton1 then sliding = false end end)
    UserInputService.InputChanged:Connect(function(i)
        if sliding and i.UserInputType == Enum.UserInputType.MouseMovement then
            local percent = math.clamp((i.Position.X - sliderBack.AbsolutePosition.X) / sliderBack.AbsoluteSize.X, 0, 1)
            sliderFill.Size = UDim2.new(percent,0,1,0)
            sliderKnob.Position = UDim2.new(percent,-20,0,0)
            local fps = math.floor(60 + (9999-60)*percent)
            if fps >= 9000 then fps = 9999 end
            CurrentFPS = fps
            if BoostEnabled then applyBoost(fps) end
        end
    end)

    local function updateBtn()
        toggle.Text = BoostEnabled and "  [Checkmark]  ĐÃ BẬT – " .. (CurrentFPS == 9999 and "UNCAPPED" or CurrentFPS) or "  [ ]  BẬT FPS BOOST"
        toggle.BackgroundColor3 = BoostEnabled and Color3.fromRGB(0,170,0) or Color3.fromRGB(40,40,40)
    end
    toggle.MouseButton1Click:Connect(function()
        BoostEnabled = not BoostEnabled
        if BoostEnabled then applyBoost() else disableBoost() end
        updateBtn()
    end)

    local opened = false
    openBtn.MouseButton1Click:Connect(function()
        opened = not opened
        menu.Visible = opened
        openBtn.Text = opened and "FPS CUSTOM Up Arrow" or "FPS CUSTOM Down Arrow"
        if opened then menu.Position = UDim2.new(0.5, -180, 0.5, -110) end
    end)

    -- KÉO MENU CHÍNH
    local draggingMenu = false
    local dragStartMenu, startPosMenu
    dragBar.InputBegan:Connect(function(i)
        if i.UserInputType == Enum.UserInputType.MouseButton1 then
            draggingMenu = true
            dragStartMenu = i.Position
            startPosMenu = menu.Position
        end
    end)
    dragBar.InputChanged:Connect(function(i)
        if i.UserInputType == Enum.UserInputType.MouseMovement and draggingMenu then
            local delta = i.Position - dragStartMenu
            menu.Position = UDim2.new(startPosMenu.X.Scale, startPosMenu.X.Offset + delta.X,
                                      startPosMenu.Y.Scale, startPosMenu.Y.Offset + delta.Y)
        end
    end)
    dragBar.InputEnded:Connect(function() draggingMenu = false end)

    -- KÉO NÚT MỞ MENU
    local dragOpenBtn = false
    local dragStartBtn, startPosBtn
    openBtn.InputBegan:Connect(function(i)
        if i.UserInputType == Enum.UserInputType.MouseButton1 and not opened then
            dragOpenBtn = true
            dragStartBtn = i.Position
            startPosBtn = openBtn.Position
        end
    end)
    openBtn.InputChanged:Connect(function(i)
        if dragOpenBtn and i.UserInputType == Enum.UserInputType.MouseMovement then
            local delta = i.Position - dragStartBtn
            openBtn.Position = UDim2.new(startPosBtn.X.Scale, startPosBtn.X.Offset + delta.X,
                                        startPosBtn.Y.Scale, startPosBtn.Y.Offset + delta.Y)
        end
    end)
    openBtn.InputEnded:Connect(function() dragOpenBtn = false end)

    -- Phím Insert
    UserInputService.InputBegan:Connect(function(i,gp)
        if not gp and i.KeyCode == Enum.KeyCode.Insert then
            BoostEnabled = not BoostEnabled
            if BoostEnabled then applyBoost() else disableBoost() end
            updateBtn()
        end
    end)
end

createFPSCounter()
createMainMenu()

StarterGui:SetCore("SendNotification",{
    Title = "FPS BOOST 2025 ĐÃ HOÀN CHỈNH!",
    Text = "• Không còn lỗi CoreGui nil\n• Hoạt động trên mọi executor (Solara, Wave, Delta...)\n• Insert bật/tắt nhanh",
    Duration = 12
})